<html>
    <head>
        <link rel="icon" href="imagenes/faviconwhitekt.png">
        <meta charset="UTF-8">
        <link rel="stylesheet" href="styles/style.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Inter&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css" integrity="sha512-1sCRPdkRXhBV2PBLUdRb4tMg1w2YPf37qatUFeS7zlBy7jJI8Lf4VHwWfZZfpXtYSLy85pkm9GaYVYMfw5BC1A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
        <title>Encriptador</title>

    </head>
    
    <body>
        <header>
            <img src="imagenes/logokt.png" alt="logoKTDev">
        </header>
        <main>
            <section class="primeraseccion">
                <textarea class="areatexto" placeholder="Ingrese el texto aquí"></textarea>
                <div class="cont-button">
                    <p class="parrafo-aclaracion">&#9888; Solo letras minúsculas y sin acentos</p>
                    <input type="button" value="Encriptar" class="btn-encriptar">
                    <input type="button" value="Desencriptar" class="btn-desencriptar">
                </div>
            </section>
            <section class="segundaseccion">
                <div class="cont-muneco">
                    <img src="imagenes/Muneco.png" width="80%">
                </div>
                <div class="cont-titulo">
                    <h3>Ningún mensaje fué encontrado</h3>
                </div>
                <div class="cont-instruccion">
                    <p>Ingresa el texto que deseas enctriptar o desencriptar</p>
                </div>
                <div class="cont-txt-encriptado">
                    <h3>Mensaje encriptado:</h3>
                    <p class="txt-encriptado"></p>
                </div>
                <div class="cont-btn-copiar">
                    <input type="button" class="btn-copiar" value="Copiar">
                </div>
            </section>

        </main>
        <footer>
            <p class="piedepagina">Con &#10084; por: Catherine Escobar   
                <a href="https://github.com/bettelgeuxe/">
                    <i class="fa-brands fa-github"></i>
                </a>
                Aprendiendo con Oracle y AluraLatam
            </p>
                

        </footer>
        
    </body>
</html>

<script>

var botonEncriptar = document.querySelector(".btn-encriptar");
    botonEncriptar.onclick = encriptar;
var botonDesencriptar = document.querySelector(".btn-desencriptar");
    botonDesencriptar.onclick = desencriptar;
var botonCopiar = document.querySelector(".btn-copiar");
    botonCopiar.onclick = copiar;
var ilustracion = document.querySelector(".cont-muneco");
var titulo2 = document.querySelector(".cont-titulo");
var instruccion = document.querySelector(".cont-instruccion");
var textoEncriptado = document.querySelector(".txt-encriptado");
var txtarea = document.querySelector(".areatexto");

function validarMensaje(){
    var mensaje = recuperar();
    var letrasAdmitidas = "abcdefghijklmnñopqrstuvwxyz ";
    var mensajeError = "";
    for (let letra of mensaje){
        if (!letrasAdmitidas.includes(letra)){
            mensajeError += `<p class="error">La letra ${letra} no es válida</p>`;
        }

    }

    if (mensajeError.length === 0){
        return true;
    }
    alert("Estás insertando caracteres no admitidos (mayúsculas,números,caracteres especiales)");
    reiniciar();
    return false;
    
}

function encriptar(){
    if(!validarMensaje()) return;
    mostrarFront2(); 
    textoEncriptado.textContent = encriptarTxt(recuperar());
    
}

function desencriptar(){
    if(!validarMensaje()) return;
    mostrarFront2();
    
    textoEncriptado.textContent = desencriptarTxt(recuperar());
}

function mostrarFront2(){
    ilustracion.classList.add("ocultar");
    titulo2.classList.add("ocultar");
    instruccion.classList.add("ocultar");

}

function recuperar(){
    var txtarea = document.querySelector(".areatexto");
    return txtarea.value;
}

function limpiarTexto(){
    txtarea.value = "";
    
}

function reiniciar(){
    location.reload();
}

function recuperarResultado(){
    var presultado = document.querySelector(".txt-Encriptado");
    navigator.clipboard.writeText(presultado.innerHTML);
    

}

function copiar(){
    textoEncriptado.textContent = recuperarResultado();
    limpiarTexto();


}

function encriptarTxt(mensaje){
    var textoRecibido = mensaje;
    var textoAcumulado = "";
    for(var i = 0; i<textoRecibido.length; i++){
        if(textoRecibido[i] == "a"){
            textoAcumulado = textoAcumulado + "ai"
        }
        else if(textoRecibido[i] == "e"){
            textoAcumulado = textoAcumulado + "enter"
        }
        else if(textoRecibido[i] == "i"){
            textoAcumulado = textoAcumulado + "imes"
        }
        else if(textoRecibido[i] == "o"){
            textoAcumulado = textoAcumulado + "ober"
        }
        else if(textoRecibido[i] == "u"){
            textoAcumulado = textoAcumulado + "ufat"
        }
        else{
            textoAcumulado = textoAcumulado + textoRecibido[i];
        }
    }
    return textoAcumulado;
}

function desencriptarTxt(mensaje){
    var textoRecibido = mensaje;
    var textoAcumulado = "";
    for(var i = 0; i<textoRecibido.length; i++){
        if(textoRecibido[i] == "a"){
            textoAcumulado = textoAcumulado + "a";
            i = i + 1;
        }
        else if(textoRecibido[i] == "e"){
            textoAcumulado = textoAcumulado + "e";
            i = i + 4;
        }
        else if(textoRecibido[i] == "i"){
            textoAcumulado = textoAcumulado + "i";
            i = i + 3;
        }
        else if(textoRecibido[i] == "o"){
            textoAcumulado = textoAcumulado + "o";
            i = i + 3;
        }
        else if(textoRecibido[i] == "u"){
            textoAcumulado = textoAcumulado + "u";
            i = i + 3;
        }
        else{
            textoAcumulado = textoAcumulado + textoRecibido[i];
        }
    }
    return textoAcumulado;

}


/*
function escuchar(){
    var mensajecopiado = textoEncriptado.textContent;
    let msg = new SpeechSynthesisUtterance();
    msg.text = mensajecopiado;
    msg.lang = "es-Es";
    window.SpeechSynthesis.speak(msg); 
}


function desencriptar(){

    var encriptado= entrada.value;
    var texto = encriptado.replaceAll("enter","e").replaceAll("imes","i").replaceAll("ai","a").replaceAll("ober","o").replaceAll("ufat","u");
    salida.value = texto;    
}*/





    



    
</script>